<!DOCTYPE html>
<html lang="cn" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chaterm 如何使用 ASR + LLM 精准操作 K8S</title>
    
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.qfLT6vLN.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.D0fVQC1v.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BNasRAYO.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DDNAyvCW.js">
    <link rel="modulepreload" href="/assets/blog_posts_asr.md.CrFsYOtF.lean.js">
    <meta name="description" content="Get years of SRE experience in minutes">
    <meta property="og:title" content="Chaterm - Open Source AI Terminal and SSH Client">
    <meta property="og:description" content="Get years of SRE experience in minutes">
    <link rel="icon" href="/static/logo.ico" type="image/x-icon">
    <script>var _hmt=_hmt||[];_hmt.push(["_setAutoPageview",!1]),function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?a4858821c45b9fca6af30f57defc4476";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>chaterm.cn</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>博客</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>文档</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/download/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>下载</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/chaterm/chaterm" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/chaterm/chaterm" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="left-aside aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--[--><!--[--><!--[--><!--[--><span class="bg-primary-100 inline-flex items-center rounded text-sm font-medium"><div data-v-35d695dd><!----><span data-v-35d695dd>Technical</span></div></span><span class="bg-primary-100 inline-flex rounded text-sm font-medium"><div class="flex flex-wrap gap-2 py-5"><!--[--><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=ASR"><!----> ASR</a><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=Kubernetes"><!----> Kubernetes</a><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=LLM"><!----> LLM</a><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=AI"><!----> AI</a><a class="rounded-sm bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-600" href="/blog/tags?init=Docker"><!----> Docker</a><!--]--></div></span><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 dark:xl:border-slate-200/5" data-v-4dfce38b><dt class="sr-only" data-v-4dfce38b>Authors</dt><dd data-v-4dfce38b><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8" data-v-4dfce38b><li class="flex items-center space-x-2" data-v-4dfce38b><img src="https://avatars.githubusercontent.com/u/41464319?v=4" alt="author image" class="h-10 w-10 rounded-full" data-v-4dfce38b><dl class="whitespace-nowrap text-sm font-medium leading-5" data-v-4dfce38b><dt class="sr-only" data-v-4dfce38b>Name</dt><dd class="text-gray-900 dark:text-white" data-v-4dfce38b><a href="/blog/authors/dyin" class="text-lg text-gray-900 hover:text-[color:var(--vp-c-brand-light)] dark:text-white dark:hover:text-[color:var(--vp-c-brand-dark)]" data-v-4dfce38b>DYin</a></dd><!----><!----></dl></li></ul></dd></dl><!--]--><!--]--><!--]--><!--]--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><footer class="mb-24 divide-y divide-gray-200 text-sm font-medium leading-5 dark:divide-slate-200/5" data-v-09caa7bf><div class="py-3" data-v-09caa7bf><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-white" data-v-09caa7bf> Next Article </h2><div class="link" data-v-09caa7bf><a href="/blog/posts/sullivan" data-v-09caa7bf>Chaterm 获评 2025 年生成式 AI 最佳实践案例</a></div></div><div class="py-3" data-v-09caa7bf><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-white" data-v-09caa7bf> Previous Article </h2><div class="link" data-v-09caa7bf><a href="/blog/posts/barrons" data-v-09caa7bf>从《巴伦周刊》谈起，我们该如何保住 SRE 的直觉？</a></div></div><div class="pt-3" data-v-09caa7bf><a class="link" href="/blog/" data-v-09caa7bf>← Back to the blog</a></div></footer><!----><!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--[--><!--[--><!--[--><header class="space-y-1 pt-6 text-center xl:pb-10"><dl><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-300"><time datetime="2026-02-05T16:00:00.000Z">2026/02/06</time></dd></dl><h1 class="md:leading-14 text-3xl font-extrabold leading-9 tracking-tight text-[color:var(--vp-c-brand-dark)] dark:text-[color:var(--vp-c-brand-light)] sm:text-4xl sm:leading-10 md:text-5xl">Chaterm 如何使用 ASR + LLM 精准操作 K8S</h1></header><!--[--><div class="xs:show xl:hidden flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><span class="bg-primary-100 inline-flex items-center rounded text-sm font-medium"><div data-v-35d695dd><!----><span data-v-35d695dd>Technical</span></div></span></div><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 dark:xl:border-slate-200/5 xs:show xl:hidden" data-v-4dfce38b><dt class="sr-only" data-v-4dfce38b>Authors</dt><dd data-v-4dfce38b><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8" data-v-4dfce38b><li class="flex items-center space-x-2" data-v-4dfce38b><img src="https://avatars.githubusercontent.com/u/41464319?v=4" alt="author image" class="h-10 w-10 rounded-full" data-v-4dfce38b><dl class="whitespace-nowrap text-sm font-medium leading-5" data-v-4dfce38b><dt class="sr-only" data-v-4dfce38b>Name</dt><dd class="text-gray-900 dark:text-white" data-v-4dfce38b><a href="/blog/authors/dyin" class="text-lg text-gray-900 hover:text-[color:var(--vp-c-brand-light)] dark:text-white dark:hover:text-[color:var(--vp-c-brand-dark)]" data-v-4dfce38b>DYin</a></dd><!----><!----></dl></li></ul></dd></dl><!--]--><!--]--><!----><!--]--><!--]--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _blog_posts_asr" data-v-39a288b8><div><p>本文介绍 Chaterm 如何通过 ASR 热词表 + LLM 纠错 的双层架构，在移动端实现各种终端操作和 Kubernetes 命令的高精度识别，从而提升移动端的命令输入效率。</p><p>并介绍 Chaterm 提示词工程的设计范式包括：明确的角色定义（Role Definition）、清晰的任务边界约束、结构化的处理流程，以及 Few-shot 示例。来提升模型输出的准确性和一致性。</p><hr><br> 作为程序员，幸幸苦苦忙碌一年，春节回家也未必轻松，赶火车回家团圆，参加爸妈安排的相亲，同学的婚礼随份子， 被七大姑问候工资，然而最恐怖的却是突如其来的 -- <!----><p>身为一个程序员，每每看到类似的场景我都感同身受</p><p><img src="/assets/asr01.Brst6PuI.png" alt=""></p><p>为了过个好年，我们打造了一个能够在极端环境下 <!----></p><p>然而，碰到的第一个挑战就是，如何让传统的语音识别，能够100%准确的转化成各个云平台API，或者K8S，Linux的操作指令？</p><hr><h2 id="一-k8s-命令语音识别的技术挑战" tabindex="-1">一：K8S 命令语音识别的技术挑战 <a class="header-anchor" href="#一-k8s-命令语音识别的技术挑战" aria-label="Permalink to &quot;一：K8S 命令语音识别的技术挑战&quot;">​</a></h2><h3 id="_1-1-问题背景" tabindex="-1">1.1 问题背景 <a class="header-anchor" href="#_1-1-问题背景" aria-label="Permalink to &quot;1.1 问题背景&quot;">​</a></h3><p>首先要解决的是，工程师经常需要在移动端通过语音快速执行各种命令，各种参数，比如 kubectl 等等。在移动端，这个过程面临一个显著的体验问题：<strong>在手机虚拟键盘上输入复杂的 Kubernetes 命令极其痛苦，而且效率低下</strong>。</p><p><strong>语音输入</strong>是一个自然的解决方案。然而，传统 ASR（Automatic Speech Recognition，自动语音识别）系统在处理 K8S 命令时面临严峻挑战：</p><table tabindex="0"><thead><tr><th>挑战类型</th><th>具体表现</th><th>示例</th></tr></thead><tbody><tr><td><strong>专有名词识别</strong></td><td>命令动词被识别为谐音词</td><td><code>kubectl</code> → &quot;酷 B 控制&quot;、&quot;cube ctl&quot;</td></tr><tr><td><strong>参数组合复杂</strong></td><td>长命令参数丢失或错位</td><td><code>kubectl get pods -n default -o wide</code> → &quot;kubectl get pods default wide&quot;</td></tr><tr><td><strong>资源类型混淆</strong></td><td>缩写与全称混用导致歧义</td><td><code>svc</code> vs <code>services</code>、<code>deploy</code> vs <code>deployments</code></td></tr><tr><td><strong>命名空间参数</strong></td><td>短参数容易被忽略</td><td><code>-n</code>、<code>--namespace</code> 被吞噬或误识别</td></tr><tr><td><strong>特殊字符处理</strong></td><td>符号无法正确识别</td><td><code>-</code>、<code>--</code>、<code>/</code> 等符号丢失</td></tr></tbody></table><h3 id="_1-2-传统方案的局限性" tabindex="-1">1.2 传统方案的局限性 <a class="header-anchor" href="#_1-2-传统方案的局限性" aria-label="Permalink to &quot;1.2 传统方案的局限性&quot;">​</a></h3><p>传统语音识别方案主要存在以下问题：</p><ol><li><strong>通用模型泛化能力不足</strong>：ASR 模型基于海量通用语料训练，对垂直领域专业术语覆盖有限</li><li><strong>OOV（Out-of-Vocabulary）问题</strong>：<code>kubectl</code>、<code>namespace</code>、<code>deployment</code> 等词汇不在常规词表中</li><li><strong>上下文理解缺失</strong>：无法理解命令语义，难以进行智能补全和纠错</li><li><strong>中英文混合识别困难</strong>：K8S 命令涉及大量英文术语与中文口语混合</li></ol><h3 id="_1-3-chaterm-的解决思路" tabindex="-1">1.3 Chaterm 的解决思路 <a class="header-anchor" href="#_1-3-chaterm-的解决思路" aria-label="Permalink to &quot;1.3 Chaterm 的解决思路&quot;">​</a></h3><p><strong>Chaterm 通过双层架构设计，实现了 K8S 命令接近 100% 的精准识别率：</strong></p><hr><p><img src="/assets/asr02.BhY3z4jf.png" alt=""></p><hr><h2 id="二、系统架构设计" tabindex="-1">二、系统架构设计 <a class="header-anchor" href="#二、系统架构设计" aria-label="Permalink to &quot;二、系统架构设计&quot;">​</a></h2><h3 id="_2-1-核心组件架构" tabindex="-1">2.1 核心组件架构 <a class="header-anchor" href="#_2-1-核心组件架构" aria-label="Permalink to &quot;2.1 核心组件架构&quot;">​</a></h3><p>在核心组件的实现层面，整体架构遵循「客户端 → 网关 → 外部服务」的设计模式，其中各层级之间通过WebSocket协议进行双向数据交互。</p><p><img src="/assets/asr03.DiC-DB3I.png" alt=""></p><p><strong>Flutter 移动端：</strong> 架构分为<strong>用户界面（UI）组件</strong>与<strong>服务层</strong>两大模块。在UI层面，VoiceInputButton 组件为用户提供了一个语音输入的接口，并通过WaveAnimation 实时反馈用户的操作状态；而在服务层面上，AudioStreamService 负责处理PCM格式的音频流采集工作，SpeechService 则封装了基于WebSocket协议的数据传输逻辑，同时，VoiceCommandCorrection 模块封装了精心设计的Prompt，实现了对大型语言模型(LLM)进行调用来完成语音命令的纠正功能。</p><p><strong>网关层：</strong> 采用了Go语言构建后端服务，其核心组成部分包括WebSocket处理器和认证模块。特别地，在建立连接的过程中，会附加一个名为<code>hotword_id</code>的参数，这使得自动语音识别(ASR)系统能够加载相应的热词列表，从而实现“一次握手，全程优化”的效果。</p><p><strong>外部服务体系：</strong> 主要集成了两方面的关键能力：一是利用腾讯云提供的实时语音识别引擎，该引擎支持热词表、替换词、权重增强等音频处理能力；二是集成LLM服务以提供高级别的语义理解和指令生成能力。这两项技术相互配合，共同提升了系统的整体性能。</p><h3 id="_2-2-语音执行执行全流程解析" tabindex="-1">2.2 语音执行执行全流程解析 <a class="header-anchor" href="#_2-2-语音执行执行全流程解析" aria-label="Permalink to &quot;2.2 语音执行执行全流程解析&quot;">​</a></h3><p><img src="/assets/asr04.D1ps4h9W.png" alt=""></p><br><p><strong>语音驱动运维指令执行：</strong> 以 kubectl get pods -A 为例</p><p>该流程演示了当用户直接口述技术命令时，系统如何处理识别误差并最终精准执行：</p><p><strong>1. 阶段一：实时语音采集与传输</strong></p><ul><li><strong>指令输入：</strong> 用户在 Flutter 客户端按下按钮，口述指令：“kubectl get pods -A”。</li><li><strong>音频处理：</strong> 客户端 AudioStreamService 实时采集 16khz/16bit 的 PCM 音频帧。</li></ul><p><strong>2. 阶段二：低延迟 ASR 实时反馈</strong></p><ul><li><strong>通信链路：</strong> Flutter 客户端通过 WebSocket 接口（/v1/speech/asr）连接 Go 后端，后端同步建立与腾讯云 ASR 的连接，并携带 hotword_id（热词表）以增强专业术语识别。</li><li><strong>识别挑战：</strong> 由于“kubectl”等词汇在非运维语境下容易被误识别，系统通过挂载运维热词表（hotword_id）来增强准确性。</li><li><strong>实时预览：</strong> ASR 实时返回中间识别结果，由后端推送到客户端，用户可以在界面上看到实时返回的识别文字，例如：“q... q币... cube control...”。</li></ul><p><strong>3. 阶段三：LLM 语义纠错（核心环节）</strong></p><ul><li><strong>原始文本获取：</strong> 语音识别结束，ASR 返回的最终文本可能存在严重偏差，例如：“cube control get pods 杠 a”（将 kubectl 误听为 cube control，将 -A 误听为“杠 a”）。</li><li><strong>调用 LLM：</strong> 调用 VoiceCommandCorrection 接口。</li><li><strong>纠错输出：</strong> LLM 结合运维知识库进行语义分析，将上述混乱的文本精准修正为标准的：kubectl get pods -A。</li></ul><p><strong>4. 阶段四：终端写入与人工确认</strong></p><ul><li><strong>终端写入：</strong> 纠错后的标准指令被发送至输入框。</li><li><strong>最终把关：</strong> 为了安全起见，指令不会立即运行，而是等待用户在客户端二次确认后，才正式在终端环境中触发执行。</li></ul><hr><h2 id="三、第一层-asr-热词表精准识别" tabindex="-1">三、第一层：ASR 热词表精准识别 <a class="header-anchor" href="#三、第一层-asr-热词表精准识别" aria-label="Permalink to &quot;三、第一层：ASR 热词表精准识别&quot;">​</a></h2><h3 id="_3-1-热词表技术原理" tabindex="-1">3.1 热词表技术原理 <a class="header-anchor" href="#_3-1-热词表技术原理" aria-label="Permalink to &quot;3.1 热词表技术原理&quot;">​</a></h3><p><strong>热词表（Hotword List）</strong> 是 ASR 系统提供的一种领域适配机制，通过提升特定词汇在解码过程中的先验概率，显著提高目标词汇的识别准确率。</p><h4 id="_3-1-1-为什么需要热词表" tabindex="-1">3.1.1 为什么需要热词表 <a class="header-anchor" href="#_3-1-1-为什么需要热词表" aria-label="Permalink to &quot;3.1.1 为什么需要热词表&quot;">​</a></h4><p>通用 ASR 模型基于海量日常语料训练，对专业术语覆盖不足，存在 <strong>OOV（Out-of-Vocabulary）问题</strong>。当用户说 &quot;kubectl&quot; 时，模型倾向于输出训练时见过的近音词（如&quot;酷B控制&quot;），而非低频专业术语。</p><h4 id="_3-1-2-工作原理" tabindex="-1">3.1.2 工作原理 <a class="header-anchor" href="#_3-1-2-工作原理" aria-label="Permalink to &quot;3.1.2 工作原理&quot;">​</a></h4><p>ASR 解码时，会计算每个候选词的输出概率。<strong>热词表通过对特定词汇施加概率加成来改变解码结果：</strong></p><div class="language-plain vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plain</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>无热词表：                      有热词表（kubectl 权重100）：</span></span>
<span class="line"><span>─────────────────────          ─────────────────────</span></span>
<span class="line"><span>&quot;酷B控制&quot; P=0.35 ← 选中        &quot;kubectl&quot; P=0.15×5=0.75 ← 选中</span></span>
<span class="line"><span>&quot;kubectl&quot; P=0.15               &quot;酷B控制&quot; P=0.35</span></span></code></pre></div><p>数学表达：<code>P&#39;(热词) = P(热词) × boost_factor</code></p><p>权重越高，boost_factor 越大，热词在同音竞争中获胜概率越高。</p><h4 id="_3-1-3-热词权重设置" tabindex="-1">3.1.3 热词权重设置 <a class="header-anchor" href="#_3-1-3-热词权重设置" aria-label="Permalink to &quot;3.1.3 热词权重设置&quot;">​</a></h4><p>腾讯云 ASR 支持 1-11,100 的权重范围：</p><table tabindex="0"><thead><tr><th>权重范围</th><th>适用场景</th><th>说明</th></tr></thead><tbody><tr><td>1-10</td><td>常规业务词汇</td><td>轻度提升，避免过拟合</td></tr><tr><td>11</td><td>专业术语</td><td>中度提升，平衡准确率与泛化</td></tr><tr><td>100</td><td>核心关键词</td><td>强制识别，适用于 OOV 词汇</td></tr></tbody></table><p><strong>K8S 命令场景采用权重 100</strong>，确保 <code>kubectl</code>、<code>namespace</code> 等核心词汇被优先识别。</p><h3 id="_3-2-k8s-热词表设计" tabindex="-1">3.2 K8S 热词表设计 <a class="header-anchor" href="#_3-2-k8s-热词表设计" aria-label="Permalink to &quot;3.2 K8S 热词表设计&quot;">​</a></h3><p>我们构建了包含 K8S 专用热词表，覆盖以下类别：</p><h4 id="_3-2-1-核心命令动词" tabindex="-1">3.2.1 核心命令动词 <a class="header-anchor" href="#_3-2-1-核心命令动词" aria-label="Permalink to &quot;3.2.1 核心命令动词&quot;">​</a></h4><div class="language-latex vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">latex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kubectl|100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kubectl get|100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cube control|100</span></span></code></pre></div><h4 id="_3-2-2-资源类型词汇" tabindex="-1">3.2.2 资源类型词汇 <a class="header-anchor" href="#_3-2-2-资源类型词汇" aria-label="Permalink to &quot;3.2.2 资源类型词汇&quot;">​</a></h4><div class="language-latex vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">latex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pods|100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pod|100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">services|100</span></span></code></pre></div><h4 id="_3-2-3-常用参数组合" tabindex="-1">3.2.3 常用参数组合 <a class="header-anchor" href="#_3-2-3-常用参数组合" aria-label="Permalink to &quot;3.2.3 常用参数组合&quot;">​</a></h4><div class="language-latex vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">latex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">杠n|100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">杠n default|100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">杠杠 namespace|100</span></span></code></pre></div><h4 id="_3-2-4-完整命令模板" tabindex="-1">3.2.4 完整命令模板 <a class="header-anchor" href="#_3-2-4-完整命令模板" aria-label="Permalink to &quot;3.2.4 完整命令模板&quot;">​</a></h4><div class="language-latex vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">latex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kubectl get pods|100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kubectl get pods -A|100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kubectl get pods -n default|100</span></span></code></pre></div><h3 id="_3-3-热词表集成流程" tabindex="-1">3.3 热词表集成流程 <a class="header-anchor" href="#_3-3-热词表集成流程" aria-label="Permalink to &quot;3.3 热词表集成流程&quot;">​</a></h3><p><img src="/assets/asr05.CkWVRVkh.svg" alt=""></p><h2 id="四、第二层-llm-智能纠错" tabindex="-1">四、第二层：LLM 智能纠错 <a class="header-anchor" href="#四、第二层-llm-智能纠错" aria-label="Permalink to &quot;四、第二层：LLM 智能纠错&quot;">​</a></h2><h3 id="_4-1-llm-纠错的必要性" tabindex="-1">4.1 LLM 纠错的必要性 <a class="header-anchor" href="#_4-1-llm-纠错的必要性" aria-label="Permalink to &quot;4.1 LLM 纠错的必要性&quot;">​</a></h3><p>尽管热词表显著提升了专业术语的识别率，但 ASR 输出仍可能存在以下问题：</p><ol><li><strong>残留谐音错误</strong>：部分词汇仍被识别为近音词（如 &quot;kube ctl&quot;）</li><li><strong>自然语言表达</strong>：用户可能说 &quot;查看所有 pod&quot; 而非 &quot;kubectl get pods -A&quot;</li><li><strong>参数顺序混乱</strong>：&quot;-n default&quot; 可能出现在命令中间</li><li><strong>格式不规范</strong>：缺少必要的空格、连字符等</li></ol><p><strong>LLM 层的作用</strong>：作为语义理解层，将 ASR 的原始输出（自然语言、谐音词、不完整命令）转换为<strong>标准的、可执行的 K8S 命令</strong>。</p><h3 id="_4-2-prompt-engineering-设计" tabindex="-1">4.2 Prompt Engineering 设计 <a class="header-anchor" href="#_4-2-prompt-engineering-设计" aria-label="Permalink to &quot;4.2 Prompt Engineering 设计&quot;">​</a></h3><p>业界对**Prompt Engineering（提示词工程）**普遍采用的设计范式包括：明确的角色定义（Role Definition）、清晰的任务边界约束、结构化的处理流程，以及高质量的 <strong>Few-shot 示例</strong>。一个设计良好的 Prompt 能显著提升模型输出的准确性和一致性。</p><p>在 Chaterm 的语音命令纠错场景中，我们遵循上述原则，设计了如下 System Prompt 结构：</p><ul><li><strong>角色定义</strong>：将模型定位为「语音转终端命令助手」，明确其职责边界——只做命令转换，不做额外解释或建议。</li><li><strong>核心原则</strong>：强调保守策略，即「不生造」——不添加用户未提及的参数，避免模型过度推理导致的错误命令。</li><li><strong>处理流程</strong>：分为两个阶段执行，先完成ASR残留的谐音纠错（文本矫正），再进行K8s命令格式规范化（结构补全）。</li><li><strong>纠正规则</strong>：通过不断调试，进一步内置谐音映射表、符号标准化规则、缩写展开规则等领域知识，为模型提供明确的转换依据。</li><li><strong>Few-shot 示例</strong>：覆盖谐音纠错、自然语言转换、参数规范化等典型场景，通过示例引导模型输出符合预期的格式。</li></ul><p><img src="/assets/asr06.BzVJhcCi.png" alt=""></p><h3 id="_4-3-llm-纠错效果" tabindex="-1">4.3 LLM 纠错效果 <a class="header-anchor" href="#_4-3-llm-纠错效果" aria-label="Permalink to &quot;4.3 LLM 纠错效果&quot;">​</a></h3><h4 id="典型场景纠错示例" tabindex="-1">典型场景纠错示例 <a class="header-anchor" href="#典型场景纠错示例" aria-label="Permalink to &quot;典型场景纠错示例&quot;">​</a></h4><table tabindex="0"><thead><tr><th>场景</th><th>ASR 原始输出</th><th>LLM 纠错输出</th></tr></thead><tbody><tr><td>谐音纠错</td><td>&quot;酷 B 控制 get 跑的&quot;</td><td>kubectl get pods</td></tr><tr><td>自然语言转换</td><td>&quot;查看所有 pod&quot;</td><td>kubectl get pods -A</td></tr><tr><td>参数规范化</td><td>&quot;kubectl get pods 杠 n default&quot;</td><td>kubectl get pods -n default</td></tr><tr><td>混合纠错</td><td>&quot;kube ctl describe 的 ployment nginx&quot;</td><td>kubectl describe deployment nginx</td></tr><tr><td>资源操作</td><td>&quot;删除 default 下面的 nginx&quot;</td><td>kubectl delete pod nginx -n default</td></tr></tbody></table><hr><h2 id="五、实际案例展示" tabindex="-1">五、实际案例展示 <a class="header-anchor" href="#五、实际案例展示" aria-label="Permalink to &quot;五、实际案例展示&quot;">​</a></h2><h3 id="案例-使用语音输入恢复payment-deployment服务" tabindex="-1">案例 ：使用语音输入恢复payment-deployment服务 <a class="header-anchor" href="#案例-使用语音输入恢复payment-deployment服务" aria-label="Permalink to &quot;案例 ：使用语音输入恢复payment-deployment服务&quot;">​</a></h3><p><img src="/assets/asr07.CUklXLoy.gif" alt=""></p><hr><h2 id="六、总结" tabindex="-1">六、总结 <a class="header-anchor" href="#六、总结" aria-label="Permalink to &quot;六、总结&quot;">​</a></h2><p>通过 <strong>ASR与热词增强 + LLM 纠错</strong> 的双层架构，Chaterm 实现了 K8S 命令接近 100% 的精准识别：</p><ol><li><strong>热词表</strong>： K8S 命令热词，权重 增强，确保专有词识别准确率</li><li><strong>LLM 纠错</strong>：将自然语言、同音词、不完整命令转换为标准 K8S 命令</li><li><strong>端到端优化</strong>：从语音输入到命令执行，全链路保障准确率</li><li><strong>未来优化方向</strong>：对短命令、高置信度场景支持跳过 LLM 调用实现本地规则快速修正，根据用户习惯优化热词表进行命令历史学习，支持保存常用命令模板等</li></ol><hr><h2 id="reference" tabindex="-1">Reference <a class="header-anchor" href="#reference" aria-label="Permalink to &quot;Reference&quot;">​</a></h2><ul><li>官网：<a href="https://chaterm.ai/" target="_blank" rel="noreferrer">https://chaterm.ai/</a></li><li>文档：<a href="https://chaterm.ai/docs/" target="_blank" rel="noreferrer">https://chaterm.ai/docs/</a></li><li>Github：<a href="https://github.com/chaterm/Chaterm" target="_blank" rel="noreferrer">https://github.com/chaterm/Chaterm</a></li></ul></div></div></main><!----><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><!----><p class="copyright" data-v-e315a0ad>Chaterm.cn 版权所有 © 2026 <br> <a href="https://beian.miit.gov.cn/#/Integrated/index">沪ICP备18014493号-11</a>  <a href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31010602009365">沪公网安备31010602009365号</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"blog_archives.md\":\"BW93whDR\",\"blog_authors_aifans.md\":\"BmJVyCN6\",\"blog_authors_aws.md\":\"lRqW3Fj-\",\"blog_authors_chaterm.md\":\"Br2WtaF9\",\"blog_authors_dsd.md\":\"BMHwcGiP\",\"blog_authors_dyin.md\":\"D6xfFoNv\",\"blog_authors_fish.md\":\"DEpgBZwm\",\"blog_authors_lamb.md\":\"ClU5vlWb\",\"blog_authors_maisie.md\":\"DIwmYnS6\",\"blog_authors_top.md\":\"Dv0d7OlJ\",\"blog_index.md\":\"C7vsCOUN\",\"blog_posts_asr.md\":\"CrFsYOtF\",\"blog_posts_barrons.md\":\"B2Xz3Hdc\",\"blog_posts_efficient.md\":\"BoGcHOJQ\",\"blog_posts_envelope.md\":\"C-koi46c\",\"blog_posts_hacker.md\":\"8pnZdbpH\",\"blog_posts_jumpserver.md\":\"cM1pnezP\",\"blog_posts_launch.md\":\"B0vGg2HA\",\"blog_posts_mcp.md\":\"Bw3zpdQ3\",\"blog_posts_pe.md\":\"DResg909\",\"blog_posts_pe2.md\":\"Hds1H09s\",\"blog_posts_security.md\":\"B34-eI5o\",\"blog_posts_sullivan.md\":\"BWy4Kfge\",\"blog_tags.md\":\"CJcCccea\",\"docs_ai_dialogs_index.md\":\"3cLeaFnG\",\"docs_ai_llms_index.md\":\"wEx2lPZ5\",\"docs_ai_preferences_index.md\":\"v3Pve8KX\",\"docs_ai_settings_index.md\":\"C6A-KTA1\",\"docs_contributing_index.md\":\"DHrP8fuL\",\"docs_hosts_add-bastion.md\":\"BgK2a3Fc\",\"docs_hosts_add-personal.md\":\"DpmT89kT\",\"docs_hosts_add-router.md\":\"Crh1PW8i\",\"docs_hosts_connect.md\":\"PgUFx6xy\",\"docs_hosts_edit-clone-delete.md\":\"CunrntgU\",\"docs_hosts_import-export.md\":\"CA5SOmQc\",\"docs_hosts_index.md\":\"CWewGuL2\",\"docs_index.md\":\"BoZv-bIy\",\"docs_manage_files_index.md\":\"CgVn1Kbq\",\"docs_manage_keys_index.md\":\"D23fPWGo\",\"docs_manage_plugin_index.md\":\"xB17AymO\",\"docs_mcp_troubleshooting_index.md\":\"Cl-n7Gdt\",\"docs_mcp_usage_index.md\":\"BuCg1skV\",\"docs_privacy_policy_index.md\":\"BlPg_UCv\",\"docs_privacy_settings_index.md\":\"PwKMQVkt\",\"docs_settings_about_index.md\":\"DR2Z79oq\",\"docs_settings_billing_index.md\":\"CHTKK_RL\",\"docs_settings_extensions_index.md\":\"9kL8YgvC\",\"docs_settings_general_index.md\":\"BZnCK8IB\",\"docs_settings_mcp_index.md\":\"CEwphAQt\",\"docs_settings_rules_index.md\":\"BCj8QOwc\",\"docs_settings_shortcuts_index.md\":\"DiKRS-17\",\"docs_settings_skills_index.md\":\"Vw2R3ojO\",\"docs_settings_terminal_index.md\":\"BN85ZMXA\",\"docs_skills_troubleshooting_index.md\":\"D1iewCUb\",\"docs_skills_usage_index.md\":\"8wtIjHo_\",\"docs_start_downloads_index.md\":\"Ce4NEf8b\",\"docs_start_pricing_index.md\":\"BsRHXAmf\",\"docs_start_quickstart_index.md\":\"D9jSBezd\",\"docs_terminal_chattoai_index.md\":\"GWwRZn_0\",\"docs_terminal_manage_index.md\":\"nf2PPrkW\",\"docs_terminal_operations_index.md\":\"Do2O0HwQ\",\"docs_terminal_snippets_index.md\":\"YeKnVBGY\",\"docs_user_account_index.md\":\"DRBVpSIW\",\"docs_user_edit_index.md\":\"BwVkYrhD\",\"docs_user_profile_index.md\":\"BX6TUglu\",\"download_index.md\":\"BZqW5W6K\",\"index.md\":\"THShclod\",\"service_index.md\":\"CoETtqAf\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"chaterm.cn\",\"titleTemplate\":false,\"description\":\"Chaterm — Open source AI terminal and SSH Client\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{},\"locales\":{\"root\":{\"label\":\"简体中文\",\"lang\":\"cn\",\"themeConfig\":{\"nav\":[{\"text\":\"博客\",\"link\":\"/blog/\"},{\"text\":\"文档\",\"link\":\"/docs/\"},{\"text\":\"下载\",\"link\":\"/download/\"}],\"sidebar\":[{\"text\":\"开始使用\",\"items\":[{\"text\":\"首页\",\"link\":\"/docs/\"},{\"text\":\"下载\",\"link\":\"/docs/start/downloads/\"},{\"text\":\"快速上手\",\"link\":\"/docs/start/quickstart/\"}]},{\"text\":\"主机管理\",\"items\":[{\"text\":\"主机列表\",\"link\":\"/docs/hosts/\"},{\"text\":\"添加个人主机\",\"link\":\"/docs/hosts/add-personal\"},{\"text\":\"添加堡垒机\",\"link\":\"/docs/hosts/add-bastion\"},{\"text\":\"添加路由器\",\"link\":\"/docs/hosts/add-router\"},{\"text\":\"主机的导入/导出\",\"link\":\"/docs/hosts/import-export\"},{\"text\":\"连接主机\",\"link\":\"/docs/hosts/connect\"},{\"text\":\"编辑/克隆/删除主机\",\"link\":\"/docs/hosts/edit-clone-delete\"}]},{\"text\":\"管理\",\"items\":[{\"text\":\"密钥管理\",\"link\":\"/docs/manage/keys/\"},{\"text\":\"文件管理\",\"link\":\"/docs/manage/files/\"},{\"text\":\"扩展管理\",\"link\":\"/docs/manage/plugin/\"}]},{\"text\":\"终端\",\"items\":[{\"text\":\"终端管理\",\"link\":\"/docs/terminal/manage/\"},{\"text\":\"终端操作\",\"link\":\"/docs/terminal/operations/\"},{\"text\":\"快捷命令\",\"link\":\"/docs/terminal/snippets/\"},{\"text\":\"Chat to AI\",\"link\":\"/docs/terminal/chattoai/\"}]},{\"text\":\"AI Agent\",\"items\":[{\"text\":\"AI 对话\",\"link\":\"/docs/ai/dialogs/\"},{\"text\":\"AI 设置\",\"link\":\"/docs/ai/settings/\"},{\"text\":\"AI 偏好设置\",\"link\":\"/docs/ai/preferences/\"},{\"text\":\"模型列表\",\"link\":\"/docs/ai/llms/\"}]},{\"text\":\"配置\",\"items\":[{\"text\":\"通用设置\",\"link\":\"/docs/settings/general/\"},{\"text\":\"终端设置\",\"link\":\"/docs/settings/terminal/\"},{\"text\":\"扩展设置\",\"link\":\"/docs/settings/extensions/\"},{\"text\":\"快捷键\",\"link\":\"/docs/settings/shortcuts/\"},{\"text\":\"规则\",\"link\":\"/docs/settings/rules/\"},{\"text\":\"计费概览\",\"link\":\"/docs/settings/billing/\"},{\"text\":\"MCP 设置\",\"link\":\"/docs/settings/mcp/\"},{\"text\":\"Skills 设置\",\"link\":\"/docs/settings/skills/\"},{\"text\":\"关于\",\"link\":\"/docs/settings/about/\"}]},{\"text\":\"MCP\",\"items\":[{\"text\":\"使用指南\",\"link\":\"/docs/mcp/usage/\"},{\"text\":\"最佳实践\",\"link\":\"/docs/mcp/troubleshooting/\"}]},{\"text\":\"Skills\",\"items\":[{\"text\":\"使用指南\",\"link\":\"/docs/skills/usage/\"},{\"text\":\"最佳实践\",\"link\":\"/docs/skills/troubleshooting/\"}]},{\"text\":\"用户\",\"items\":[{\"text\":\"个人信息\",\"link\":\"/docs/user/profile/\"},{\"text\":\"账号管理\",\"link\":\"/docs/user/account/\"},{\"text\":\"修改密码\",\"link\":\"/docs/user/edit/\"}]},{\"text\":\"隐私\",\"items\":[{\"text\":\"隐私设置\",\"link\":\"/docs/privacy/settings/\"},{\"text\":\"隐私政策\",\"link\":\"/docs/privacy/policy/\"}]},{\"text\":\"开发\",\"items\":[{\"text\":\"贡献指南\",\"link\":\"/docs/contributing/\"}]}],\"footer\":{\"copyright\":\"Chaterm.cn 版权所有 © 2026 <br> <a href=\\\"https://beian.miit.gov.cn/#/Integrated/index\\\">沪ICP备18014493号-11</a>  <a href=\\\"https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31010602009365\\\">沪公网安备31010602009365号</a>\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/chaterm/chaterm\"}],\"blog\":{\"title\":\"技术博客\",\"description\":\"\",\"defaultAuthor\":\"Chaterm\",\"categoryIcons\":{\"article\":\"i-[carbon/notebook]\",\"tutorial\":\"i-[carbon/book]\",\"document\":\"i-[carbon/document]\"},\"tagIcons\":{\"github\":\"i-[carbon/logo-github]\",\"vue\":\"i-[logos/vue]\",\"javascript\":\"i-[logos/javascript]\",\"web development\":\"i-[carbon/development]\",\"html\":\"i-[logos/html-5]\",\"git\":\"i-[logos/git-icon]\",\"vite\":\"i-[logos/vitejs]\",\"locked\":\"i-[twemoji/locked]\",\"react\":\"i-[logos/react]\",\"blog\":\"i-[carbon/blog]\",\"comment\":\"i-[carbon/add-comment]\"},\"giscus\":{\"repo\":\"chunge16/vitepress-blogs-theme-template\",\"repoId\":\"R_kgDOKz3GKg\",\"category\":\"General\",\"categoryId\":\"DIC_kwDOKz3GKs4CbySw\",\"mapping\":\"pathname\",\"inputPosition\":\"top\",\"lang\":\"zh-CN\",\"lightTheme\":\"light\",\"darkTheme\":\"transparent_dark\",\"defaultEnable\":true}}}}},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>